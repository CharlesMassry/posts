{"componentChunkName":"component---src-templates-blog-post-js","path":"/8-http-requests-in-sinatra/","webpackCompilationHash":"ee13614abdca802b29ea","result":{"data":{"site":{"siteMetadata":{"title":"Charlie Massry","author":"Charlie Massry"}},"markdownRemark":{"id":"950dc238-a288-5bc8-b700-30c7338312a1","excerpt":"In HTTP, there are four common request actions that are used by servers, GET, POST, PUT, and DELETE. This maps to CRUD, Create, Read, Update, and Delete…","html":"<p>In HTTP, there are four common request actions that are used by servers, GET, POST, PUT, and DELETE. This maps to CRUD, Create, Read, Update, and Delete. Unfortunately, the browsers can only send the GET and POST requests and not PUT and DELETE. To combat this, the server must fake the requests by using a hidden field to change the type of request in the browser. Consider the PUT request. The server file would have to have a GET method to a new page that has a form for updating, and that new page must have a form that uses the PUT method.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\"># server.rb \nget &quot;/galleries/:id/edit&quot; do\n  @gallery = Gallery.find(params[:id])\n  erb :edit_gallery\nend\n\nput &quot;/galleries/:id&quot; do\n  gallery = Gallery.find(params[:id])\n  gallery.update(params[:gallery])\n  redirect to(&quot;/galleries/#{params[:id]}&quot;)\nend\n\nviews/edit_gallery.erb\n&lt;form action=&quot;/galleries/&lt;%= @gallery.id %&gt;&quot; method=&quot;POST&quot;&gt;\n  &lt;input type=&quot;hidden&quot; name=&quot;_method&quot; value=&quot;put&quot;&gt;\n  ...\n&lt;/form&gt;</code></pre></div>\n<p>While you have to do the same for the POST request as far as the server.rb file is concerned, you must add that second line in the edit_gallery.erb file. One thing of note is the <code class=\"language-text\">name=“_method” value=“put”</code> snippet. This is how Sinatra determines that you wanted it to be a PUT request and not a POST request and looks for a route that matches a put method.</p>\n<p>The DELETE method is easier as you just need to create a delete input button as opposed to a creating a new GET request and new erb file. Just don’t forget to add the hidden input field.</p>","frontmatter":{"title":"HTTP Requests in Sinatra","date":"June 27, 2014"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/8-http-requests-in-sinatra/","previous":{"fields":{"slug":"/7-database-control-in-ruby/"},"frontmatter":{"title":"Database Control in Ruby","id":7}},"next":{"fields":{"slug":"/9-designing-a-flash-card-app-in-sinatra/"},"frontmatter":{"title":"Designing a Flash Card App in Sinatra","id":9}}}}}