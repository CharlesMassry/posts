{"componentChunkName":"component---src-templates-blog-post-js","path":"/33-angularjs-on-rails/","webpackCompilationHash":"","result":{"data":{"site":{"siteMetadata":{"title":"Gatsby Starter Blog","author":"Kyle Mathews"}},"markdownRemark":{"id":"cb55d1be-1c15-52ac-9da0-ee86ee2463c1","excerpt":"Recently, I have started looking into AngularJS, a popular front-end Javascript MVC, to help me write cleaner, better, front-end code. AngularJS, developed by…","html":"<p>Recently, I have started looking into AngularJS, a popular front-end Javascript MVC, to help me write cleaner, better, front-end code. <a href=\"https://angularjs.org/\">AngularJS</a>, developed by <a href=\"https://www.google.com/\">Google</a>, enhances your HTML by providing useful HTML attributes, data-binding, and helpful methods to pull it all together. </p>\n<p>To get started on an existing Rails project, you should create a JSON feed, I like to use <a href=\"https://github.com/rails/jbuilder\">jbuilder</a>. For example, if your controller looks like:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">class PlayerStatsController &lt; ApplicationController\n  ...\n  def show\n    team = find_team\n    @player_stat_column = team.player_stat_columns\n    @players = team.players\n  end\n  ...\nend</code></pre></div>\n<p>Your jbuilder file would look like:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">json.player_stat_column @player_stat_column.names\n\njson.players @players do |player|\n  json.email player.email\n  json.stats player.player_stat.statistics\nend</code></pre></div>\n<p>This would create a JSON page at whatever the URL is, plus <code class=\"language-text\">.json</code>. The JSON page would look then render something that looks like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">{\n  player_stat_column: [\n    &quot;completions&quot;,\n    &quot;attempts&quot;,\n    &quot;goals&quot;\n  ],\n  players: [\n    {\n      email: &quot;me@charliemassry.com&quot;,\n      stats: {\n        completions: 77,\n        attempts: 90,\n        goals: 24\n      }\n    },\n    {\n      email: &quot;something1@charliemassry.com&quot;,\n      stats: []\n    }\n  ]\n}</code></pre></div>\n<p>Now you have your data, but how do you pass that into the view using AngularJS. Well first, you must require the AngularJS file by typing</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;%= javascript_include_tag &quot;https://ajax.googleapis.com/ajax/libs/angularjs/1.2.24/angular.min.js&quot; %&gt;</code></pre></div>\n<p>in either <code class=\"language-text\">application.html.erb</code> or typing in</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;% content_for :angular do %&gt;\n  &lt;%= javascript_include_tag &quot;https://ajax.googleapis.com/ajax/libs/angularjs/1.2.24/angular.min.js&quot; %&gt;\n&lt;% end %&gt;</code></pre></div>\n<p>in the current file and then adding <code class=\"language-text\">&lt;%= yield :angular %&gt;</code> in the <code class=\"language-text\">application.html.erb</code> file. In both cases, you must require AngularJS before the standard <code class=\"language-text\">javascript_include_tag</code>. One problem with using a “Content Delivery Network” to include the AngularJS library is if you need to work on the project offline, say on a train or such, it won’t work so you will have to manually include the project in your application.</p>\n<p>Now that you have AngularJS and you JSON feed set up you can finally begin. First, you need to create the scope of the AngularJS app, so if you are not creating an entire AngularJS app and it will be local to one particular site simply make a div tag that holds the entire partial and pass in the attribute <code class=\"language-text\">ng-app</code> and create a module name for it.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;div ng-app=&quot;playerStats&quot;&gt;&lt;/div&gt;</code></pre></div>\n<p>Next, you must require the AngularJS module, so in a Javascript file, let’s call it <code class=\"language-text\">main.js</code> and let’s put it in <code class=\"language-text\">app/assets/javascripts/</code>. Let’s also make sure to require it before the rest of the Javascript files. So in your <code class=\"language-text\">application.js</code> file</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">...\n//= require main\n//= require tree .</code></pre></div>\n<p>Now that that’s out of the way we can write our module file, for now it is just a one liner in the <code class=\"language-text\">main.js</code> file.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">var playerStats = angular.module(&#39;playerStats&#39;, []);</code></pre></div>\n<p>Now we can move on to our controller.  </p>\n<p>What I’d like to happen is take our JSON feed and display it on the page and map the players’ stats to the column names. This can be done fairly easily with AngularJS. First you must scope the controller to a particular part of a page. So now your page should look like</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;div ng-app=&quot;playerStats&quot;&gt;\n  &lt;div ng-controller=&quot;playerStatsController&quot;&gt;&lt;/div&gt;\n&lt;/div&gt;</code></pre></div>\n<p>Second, create a controller, we’ll put it in <code class=\"language-text\">app/assets/javascripts/angular/controllers</code>, and we will call it <code class=\"language-text\">playerStatsController.js</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">playerStats.controller(&quot;playerStatsController&quot;, [&quot;$scope&quot;, &quot;$http&quot;, function($scope, $http){\n  var path = location.pathname + &quot;.json&quot;;\n  $http.get(path).success(function(data){\n  $scope.columns = data.player_stat_column;\n  $scope.players = data.players;\n  });\n}]);</code></pre></div>\n<p>What is happening in this controller is, its name is being assigned and then it is passed in two variables that it has access to, <code class=\"language-text\">$scope</code> and <code class=\"language-text\">$http</code>. <code class=\"language-text\">$scope</code> allows you to pass variables to the view for easy data-binding, and <code class=\"language-text\">$http</code> allows you to access other websites. Within the controller, the url plus <code class=\"language-text\">.json</code> is being assigned to the <code class=\"language-text\">path</code> variable to retrieve data from the JSON feed we created earlier. Once it retrieves the data, it then assigns the Javascript objects to the <code class=\"language-text\">$scope</code> so the view will have access to them.</p>\n<p>So we will change the view to loop through each of the <code class=\"language-text\">player</code> objects and show their stats in the view.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;div ng-app=&quot;playerStats&quot;&gt;\n  &lt;div ng-controller=&quot;playerStatsController&quot;&gt;\n    &lt;h3&gt;Player Statsheet&lt;/h3&gt;\n    player &lt;span ng-repeat=&quot;column in columns&quot;&gt;{{column}} &lt;/span&gt;\n    &lt;div ng-repeat=&quot;player in players&quot;&gt;\n      {{player.email}} &lt;span ng-repeat=&quot;column in columns&quot;&gt;{{player.stats[column]}} &lt;/span&gt;\n    &lt;/div&gt;\n  &lt;/div&gt; \n&lt;/div&gt;</code></pre></div>\n<p>First, using the <code class=\"language-text\">ng-repeat</code> attribute, it is looping over all the columns. Calling it columns is important, so it knows where to grab the variable from the scope. It will repeat each column and print it out to the document using the <code class=\"language-text\">{{}}</code> AngularJS tags. It then loops through each player and calls each column name in the stat and prints out the result using a nested loop. And that’s all there is to getting started with AngularJS on Rails. Stay tuned for a future update on some more advanced functionality.</p>","frontmatter":{"title":"AngularJS on Rails","date":"September 16, 2014","description":null}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/33-angularjs-on-rails/","previous":{"fields":{"slug":"/32-postgrejson/"},"frontmatter":{"title":"PostgreJSON"}},"next":{"fields":{"slug":"/34-geolocating-on-rails/"},"frontmatter":{"title":"Geolocating on Rails"}}}}}