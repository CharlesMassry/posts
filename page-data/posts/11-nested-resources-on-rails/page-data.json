{"componentChunkName":"component---src-templates-blog-post-js","path":"/posts/11-nested-resources-on-rails/","webpackCompilationHash":"b345033e32c71e3a88cb","result":{"data":{"site":{"siteMetadata":{"title":"Charlie Massry","author":"Charlie Massry"}},"markdownRemark":{"id":"44e74d5b-b6e1-585d-bbb8-27cb6272d651","excerpt":"There are a few key things you must remember when working with nested resources in Ruby on Rails. The first thing to do is edit your routes file. This creates…","html":"<p>There are a few key things you must remember when working with nested resources in Ruby on Rails. The first thing to do is edit your routes file.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">resources :galleries do\n  resources :images\nend </code></pre></div>\n<p>This creates all of those routes with the HTTP verbs that point to the controller#action and creates the URL helpers. Much less typing than Sinatra.</p>\n<p>The next thing to do is work through the same process you would do without nested resources with some minor exceptions. For example, you have to create the controller with the actions and then the views. One thing to remember is when you make a form in a nested resource, you have to include both resources in the controller.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">def new\n  @gallery = Gallery.find(params[:gallery_id])\n  @image = Image.new\nend </code></pre></div>\n<p>This is because <code class=\"language-text\">#new</code> needs to have both gallery and image objects to pass into the <code class=\"language-text\">form_for</code> helper method. <code class=\"language-text\">form_for</code> needs the information about the parent resource in order to create a hidden field for the foreign key.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;%= form_for [@gallery, @image] do |form| %&gt;\n  ...\n&lt;% end %&gt;</code></pre></div>\n<p><code class=\"language-text\">[@gallery, @image]</code> gives it the new gallery image post path, which Rails knows that it is the path that you want because you are coming from the GET new gallery image path. If this was in the edit method, then you would pass the same arguments in, except for you would pass in an existing image instance in the images controller and not a new one.</p>","frontmatter":{"title":"Nested Resources on Rails","date":"July 02, 2014"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/posts/11-nested-resources-on-rails/","previous":{"fields":{"slug":"/posts/10-mvc-r/"},"frontmatter":{"title":"MVC...R?","id":10}},"next":{"fields":{"slug":"/posts/12-yo-dawg-i-heard-you-like-partials-so-i-put-a-partial-in-your-partial-so-you-can-refactor-while-you-refactor/"},"frontmatter":{"title":"Yo Dawg, I Heard You Like Partials So I Put a Partial In Your Partial So You Can Refactor While You Refactor.","id":12}}}}}