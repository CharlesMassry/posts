{"componentChunkName":"component---src-templates-blog-post-js","path":"/posts/57-pass-data-around-ios-with-nsuserdefaults/","webpackCompilationHash":"0306b4c3a9ca2069c7b2","result":{"data":{"site":{"siteMetadata":{"title":"Charlie Massry","author":"Charlie Massry"}},"markdownRemark":{"id":"d9218b1f-000d-50fe-8dc6-fd46e9e146b7","excerpt":"When dealing with the Model-View-Controller pattern, one of the problems you will face is that it is stateless, while the application itself is a fluid object…","html":"<p>When dealing with the Model-View-Controller pattern, one of the problems you will face is that it is stateless, while the application itself is a fluid object, and controllers are independent objects that have no knowledge of what called it. This can be a problem if you need data to be passed around. In iOS, you can pass data around by using <code class=\"language-text\">-prepareForSegue:sender:</code>. This however can get complicated if you need to pass data through a <code class=\"language-text\">UITabBarController</code> and a <code class=\"language-text\">UINavigationController</code>.</p>\n<p>In Rails, we might do something like pass around the params hash in the URL. This however can get really messy really quickly. A good approach in Rails would probably be to store this information to the database. In iOS, for primitive data types, there is NSUserDefaults, which is a key value store that is good for storing user preferences for your app. There is also Core Data, iOS’s ORM, which I will cover in a later post.</p>\n<p>When making an app where the user can match cards similar to concentration, one of the problems faced is how to allow the user to choose what the card back looks like. If you want to give the user that option, you need to make another View and another Controller. When a specific image is touched, set the value of the given key to a primitive data type that can be used to access the image.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {\n    NSUserDefaults *schoolChoice = [NSUserDefaults standardUserDefaults];\n    self.school = [self schoolForButton:sender];\n    [schoolChoice setObject:self.school forKey:@&quot;school&quot;];\n    [schoolChoice synchronize];\n}</code></pre></div>\n<p>In this method, <code class=\"language-text\">NSUserDefaults</code> is first instantiated with a factory method, <code class=\"language-text\">+standardUserDefaults</code>. Next, the <code class=\"language-text\">-schoolForButton:</code> method turns the button pressed into a string to retrieve the school later and just make sure that this image name is in the images folder. That string is then stored in the <code class=\"language-text\">NSUserDefaults</code> instance by sending it the <code class=\"language-text\">-setObject:forKey:</code>. Finally you must send it <code class=\"language-text\">-synchronize</code> so it saves it for use later.</p>\n<p>Now in the controller that will be responsible to play the game, we have to decide where we want to initialize this image name. A perfect place is in <code class=\"language-text\">-viewDidLoad</code> as the controller is already initialized, so you will have access to all its instance variables, and the user won’t even see the difference.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">-(void)viewDidLoad {\n    NSUserDefaults *schoolChoice = [NSUserDefaults standardUserDefaults];\n    self.school = [schoolChoice stringForKey:@&quot;school&quot;];\n    [super viewDidLoad];\n    [self updateUI];\n}</code></pre></div>\n<p>Again, we are instantiating <code class=\"language-text\">NSUserDefaults</code>, but this time we are retrieving the school and passing it to the instance variable. Then we just call <code class=\"language-text\">super</code> to have the default behavior. We do however need to tell it to update the card backs on all of the cards, and <code class=\"language-text\">-updateUI</code> will provide us with this exact behavior which calls a method that sets the card back to the appropriate school image.</p>\n<p>You can find the repository for this source code on <a href=\"http://github.com/CharlesMassry/Machismo\">Github</a>.</p>","frontmatter":{"title":"Pass Data Around iOS With NSUserDefaults","date":"February 26, 2015"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/posts/57-pass-data-around-ios-with-nsuserdefaults/","previous":{"fields":{"slug":"/posts/56-put-your-controllers-on-a-diet-with-service-objects/"},"frontmatter":{"title":"Put Your Controllers On a Diet With Service Objects","id":56}},"next":{"fields":{"slug":"/posts/58-using-transactions-with-active-record/"},"frontmatter":{"title":"Using Transactions with Active Record","id":58}}}}}