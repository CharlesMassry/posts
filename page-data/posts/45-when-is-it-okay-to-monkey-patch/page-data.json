{"componentChunkName":"component---src-templates-blog-post-js","path":"/posts/45-when-is-it-okay-to-monkey-patch/","webpackCompilationHash":"09ce27ea380d5293a135","result":{"data":{"site":{"siteMetadata":{"title":"Charlie Massry","author":"Charlie Massry"}},"markdownRemark":{"id":"77903401-a72e-58b3-ab45-7b1877c5bdf4","excerpt":"Monkey Patching is a term in Object-Oriented Programming when you open up an existing class and add new methods to it. A good way to find cool Ruby tricks is to…","html":"<p>Monkey Patching is a term in Object-Oriented Programming when you open up an existing class and add new methods to it. A good way to find cool Ruby tricks is to look into the implementation of the <a href=\"https://github.com/rails/rails/tree/master/activesupport\">ActiveSupport</a> gem included in Rails. They do have some Monkey Patching, although it was definitely done after careful consideration.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">class String\n  def remove(pattern)\n    gsub pattern, &#39;&#39;\n  end\nend</code></pre></div>\n<p>A lot of times you may want to remove characters from strings using <code class=\"language-text\">#gsub</code>, and it was decided that it may be a lot nicer to have <code class=\"language-text\">#remove</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&quot;foo&quot;.remove(/o/) # =&gt; &quot;f&quot;\n&quot;foo&quot;.gsub(/o/, &quot;&quot;) # =&gt; &quot;f&quot;</code></pre></div>\n<p>You won’t find any bad examples of Monkey Patching in ActiveSupport, but if you were to try and add your own, it might not end well. The standard library in Ruby is so robust, you might find that it is not even useful to Monkey Patch classes as you can do more harm than good. With other languages, you might not be wrong to Monkey Patch. Take for example Javascript. There is no method on the string prototype <code class=\"language-text\">#capitalize</code> to turn the first letter in the string into a capital letter. If you need to use this functionality in your Javascript, you have two choices, Monkey Patch the string prototype, or add a method globally. First the former,</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">String.prototype.capitalize = function () {\n  return this.charAt(0).toUpperCase() + this.slice(1);\n};</code></pre></div>\n<p>Next the latter,</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">function capitalize(string) {\n  return string.charAt(0).toUpperCase() + string.slice(1);\n}</code></pre></div>\n<p>Neither of these options are great. The former is Monkey Patching, but it can be called in a very object-oriented manner.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&quot;foo&quot;.capitalize(); // =&gt; &quot;Foo&quot;</code></pre></div>\n<p>The latter can be called with any type of argument and will give you a runtime error.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">capitalize(42)\nTypeError: Object 42 has no method &#39;charAt&#39;</code></pre></div>\n<p>Sure you can do a bunch of type checks, but that’s a code smell when dealing with a duck type language such as Javascript. In any event, it is really up to you to decide what to write, and either way, you will have conflicting viewpoints, but whatever you do, don’t redefine methods on classes unless that is the behavior you seek.</p>","frontmatter":{"title":"When Is It Okay to Monkey Patch?","date":"November 03, 2014"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/posts/45-when-is-it-okay-to-monkey-patch/","previous":{"fields":{"slug":"/posts/44-taggable-rails/"},"frontmatter":{"title":"Taggable Rails","id":44}},"next":{"fields":{"slug":"/posts/46-metaprogramming-with-method-missing/"},"frontmatter":{"title":"Metaprogramming with Method Missing","id":46}}}}}